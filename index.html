<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study.com</title> <!-- Default cloak -->
    <link id="favicon" rel="icon" href="https://www.study.com/favicon.ico">
    <style>
        body { font-family: 'Segoe UI', sans-serif; margin: 0; padding: 0; background: #0a0a0a; color: #fff; transition: all 0.5s ease; overflow-x: hidden; }
        .neon-theme { background: #000; color: #0ff; }
        .neon-theme button { box-shadow: 0 0 10px #0ff, 0 0 20px #0ff; }
        .matrix-theme { background: #001100; color: #0f0; font-family: 'Courier New', monospace; }
        .matrix-theme button { box-shadow: 0 0 10px #0f0, 0 0 20px #0f0; }
        .light-theme { background: #f5f5f5; color: #000; }
        .light-theme button { box-shadow: 0 0 10px #00d4ff, 0 0 20px #00d4ff; }
        header { background: linear-gradient(135deg, #1e3c72, #2a5298); padding: 15px; text-align: center; box-shadow: 0 4px 20px rgba(0,0,0,0.5); transition: all 0.5s ease; }
        .neon-theme header { background: linear-gradient(135deg, #00f, #0ff); }
        .matrix-theme header { background: linear-gradient(135deg, #003300, #006600); }
        .light-theme header { background: linear-gradient(135deg, #e0e0e0, #f0f0f0); }
        nav { background: rgba(26,26,26,0.8); padding: 10px; display: flex; justify-content: center; flex-wrap: wrap; gap: 10px; position: sticky; top: 0; z-index: 10; backdrop-filter: blur(10px); transition: all 0.5s ease; }
        .light-theme nav { background: rgba(224,224,224,0.8); }
        nav button { background: #333; color: #fff; border: none; padding: 12px 24px; border-radius: 25px; cursor: pointer; transition: all 0.3s ease; min-width: 100px; box-shadow: 0 0 5px rgba(0,212,255,0.5); }
        .light-theme nav button { background: #ccc; color: #000; }
        nav button:hover { transform: scale(1.1); box-shadow: 0 0 15px #00d4ff; }
        nav button.active { background: #00d4ff; transform: scale(1.05); box-shadow: 0 0 20px #00d4ff; }
        section { padding: 20px; display: none; min-height: 70vh; opacity: 0; transition: opacity 0.5s ease; }
        section.active { display: block; opacity: 1; }
        input[type="url"], input[type="text"], input[type="password"] { width: 70%; padding: 12px; border-radius: 5px; border: 1px solid #444; transition: border 0.3s; }
        input:focus { border-color: #00d4ff; box-shadow: 0 0 10px #00d4ff; }
        .light-theme input { border-color: #ccc; background: #fff; color: #000; }
        button { padding: 12px 24px; background: #00d4ff; color: #000; border: none; border-radius: 5px; cursor: pointer; margin: 5px; transition: all 0.3s; box-shadow: 0 0 10px #00d4ff; }
        button:hover { background: #00b8d4; box-shadow: 0 0 20px #00b8d4; }
        #proxy-content { border: 1px solid #333; height: 70vh; overflow: auto; background: #000; color: #fff; padding: 15px; margin-top: 10px; border-radius: 5px; transition: all 0.5s; position: relative; }
        .light-theme #proxy-content { background: #fff; color: #000; border-color: #ccc; }
        #loading-spinner { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 20px; color: #00d4ff; display: none; }
        .game-grid, .app-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; }
        .game-item, .app-item { background: rgba(26,26,26,0.8); padding: 10px; border-radius: 10px; text-align: center; cursor: pointer; transition: all 0.3s ease; backdrop-filter: blur(5px); }
        .light-theme .game-item, .light-theme .app-item { background: rgba(240,240,240,0.8); }
        .game-item:hover, .app-item:hover { transform: translateY(-10px) rotate(2deg); box-shadow: 0 0 20px #00d4ff; }
        .game-item img, .app-item img { width: 100%; height: 150px; object-fit: cover; border-radius: 5px; transition: transform 0.3s; }
        .game-item img:hover, .app-item img:hover { transform: scale(1.05); }
        #game-player { margin-top: 20px; display: none; border: 1px solid #333; height: 600px; position: relative; border-radius: 5px; overflow: hidden; }
        #game-player iframe { width: 100%; height: 100%; border: none; }
        #fullscreen-btn { position: absolute; top: 10px; right: 10px; padding: 8px; background: rgba(0,0,0,0.5); color: #fff; border: none; cursor: pointer; border-radius: 5px; }
        #search { width: 100%; padding: 12px; margin-bottom: 20px; border-radius: 5px; }
        h2 { color: #00d4ff; text-align: center; text-shadow: 0 0 10px #00d4ff; }
        #particles { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: -1; }
        #password-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); display: flex; align-items: center; justify-content: center; z-index: 1000; }
        #password-form { background: #333; padding: 30px; border-radius: 10px; text-align: center; box-shadow: 0 0 20px #00d4ff; }
        .light-theme #password-form { background: #ddd; }
        .cloak-btn { background: #ff6b6b; box-shadow: 0 0 10px #ff6b6b; }
        .cloak-btn:hover { background: #ff5252; box-shadow: 0 0 20px #ff5252; }
        .favorite-btn { background: #ffd700; color: #000; box-shadow: 0 0 10px #ffd700; margin-top: 5px; }
        .favorite-btn:hover { background: #ffcc00; box-shadow: 0 0 20px #ffcc00; }
        #history-list, #favorites-grid { margin-top: 20px; }
        select { padding: 10px; border-radius: 5px; margin: 5px; }
        @media (max-width: 768px) { .game-grid, .app-grid { grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); } input[type="url"] { width: 100%; } }
    </style>
</head>
<body>
    <div id="password-overlay">
        <div id="password-form">
            <h3>Enter Passcode</h3>
            <input type="password" id="passInput" placeholder="Ghost Key">
            <button onclick="checkPass()">Unlock</button>
        </div>
    </div>
    <canvas id="particles"></canvas>
    <header>
        <h1>Interstellar Ghost V4</h1>
        <p>Blazing proxies. YouTube streams clean. VPN evasion cranked. Locked in.</p>
    </header>
    <nav>
        <button onclick="showTab('home')" class="active">Home</button>
        <button onclick="showTab('proxy')">Proxy</button>
        <button onclick="showTab('games')">Games</button>
        <button onclick="showTab('apps')">Apps</button>
        <button onclick="showTab('favorites')">Favorites</button>
        <button onclick="showTab('settings')">Settings</button>
    </nav>
    <section id="home" class="active">
        <h2>Welcome to the Neon Void</h2>
        <p>Proxy blasts parallelâ€”YouTube/any site loads warp speed. Games glow, faves locked, history hotkeys.</p>
        <button class="cloak-btn" onclick="aboutBlankProxy()">Blank Proxy Tab</button>
    </section>
    <section id="proxy">
        <h2>Proxy Any URL</h2>
        <input type="url" id="urlInput" placeholder="https://youtube.com" value="https://youtube.com">
        <button onclick="loadProxy()">Tunnel It</button>
        <div id="proxy-content"><div id="loading-spinner">Blasting proxies...</div></div>
        <h3>History</h3>
        <ul id="history-list"></ul>
    </section>
    <section id="games">
        <h2>Games Arsenal</h2>
        <input type="text" id="search" placeholder="Search games..." oninput="filterItems('games')">
        <div class="game-grid" id="games-grid">
            <!-- Games from before, all good -->
            <div class="game-item" data-name="2048" data-url="https://html5games.com/Game/2048/" onclick="loadGame(this.dataset.url, this.dataset.name)"><img src="https://play-lh.googleusercontent.com/0rgPbNirPoU6W3GfZB4Vqo81h7tFGC0G9tXR2-NQ6Kl7aYgQ6tWZgrK9w5bMF1tY7Vc" alt="2048"><h3>2048</h3><button class="favorite-btn" onclick="toggleFavorite(event, this.parentElement)">Fav</button></div>
            <!-- ... (keep all 40+ from v3) -->
        </div>
        <div id="game-player"><iframe id="game-iframe" src=""></iframe><button id="fullscreen-btn" onclick="goFullScreen()">Full</button></div>
    </section>
    <section id="apps">
        <h2>Apps & Launchers</h2>
        <input type="text" id="app-search" placeholder="Search apps..." oninput="filterItems('apps')">
        <div class="app-grid" id="apps-grid">
            <!-- Apps from before -->
        </div>
    </section>
    <section id="favorites">
        <h2>Favorites</h2>
        <div class="game-grid" id="favorites-grid"></div>
    </section>
    <section id="settings">
        <h2>Cloak & Tools</h2>
        <h3>Tab Cloak</h3>
        <input type="text" id="cloak-title" placeholder="Tab Title (e.g., Google Docs)">
        <input type="url" id="cloak-favicon" placeholder="Favicon URL">
        <button onclick="applyCloak()">Apply</button>
        <h3>Themes</h3>
        <button onclick="setTheme('dark')">Dark</button>
        <button onclick="setTheme('neon')">Neon</button>
        <button onclick="setTheme('matrix')">Matrix</button>
        <button onclick="setTheme('light')">Light</button>
        <h3>Proxy Chain</h3>
        <select id="proxy-select">
            <option value="0">Allorigins</option>
            <option value="1">Corsproxy.io</option>
            <option value="2">Ycors</option>
            <option value="3">Cors.lol</option>
            <option value="4">Codetabs</option>
            <option value="5">Cors.sh</option>
        </select>
        <h3>Tools</h3>
        <button onclick="toggleInspect()">Inspect</button>
        <button onclick="toggleParticles()">Particles</button>
    </section>

    <script>
        let favorites = JSON.parse(localStorage.getItem('favorites')) || [];
        let history = JSON.parse(localStorage.getItem('proxyHistory')) || [];
        const proxies = [
            url => `https://api.allorigins.win/raw?url=${encodeURIComponent(url.startsWith('http') ? url : 'https://' + url)}`,
            url => `https://corsproxy.io/?${encodeURIComponent(url.startsWith('http') ? url : 'https://' + url)}`,
            url => `https://ycors.app/?${encodeURIComponent(url.startsWith('http') ? url : 'https://' + url)}`,
            url => `https://cors.lol/?${encodeURIComponent(url.startsWith('http') ? url : 'https://' + url)}`,
            url => `https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(url.startsWith('http') ? url : 'https://' + url)}`,
            url => `https://cors.sh/?${encodeURIComponent(url.startsWith('http') ? url : 'https://' + url)}`
        ];
        const userAgents = ['Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.36', 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.0 Safari/605.1.15', 'Mozilla/5.0 (iPhone; CPU iPhone OS 17_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.0 Mobile/15E148 Safari/604.1'];

        function checkPass() {
            if (document.getElementById('passInput').value === 'ghost') {
                document.getElementById('password-overlay').style.display = 'none';
            } else {
                alert('Wrong. Try again.');
            }
        }

        function showTab(tab) {
            document.querySelectorAll('section').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('nav button').forEach(btn => btn.classList.remove('active'));
            document.getElementById(tab).classList.add('active');
            event.target.classList.add('active');
            if (tab === 'favorites') loadFavorites();
            if (tab === 'proxy') loadHistory();
        }

        async function loadProxy(singleIndex = -1) {
            const url = document.getElementById('urlInput').value;
            const content = document.getElementById('proxy-content');
            const spinner = document.getElementById('loading-spinner');
            spinner.style.display = 'block';
            content.innerHTML = '';
            history.push(url);
            localStorage.setItem('proxyHistory', JSON.stringify(history.slice(-10)));
            loadHistory();
            const youtubeMatch = url.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/);
            if (youtubeMatch) {
                content.innerHTML = `<iframe width="100%" height="100%" src="https://www.youtube.com/embed/${youtubeMatch[1]}" frameborder="0" allowfullscreen></iframe>`;
                spinner.style.display = 'none';
                return;
            }
            const fetchOptions = { headers: { 'User-Agent': userAgents[Math.floor(Math.random() * userAgents.length)] } };
            const fetches = (singleIndex >= 0 ? [proxies[singleIndex]] : proxies).map(getProxy => fetch(getProxy(url), fetchOptions).then(res => { if (res.ok) return res.text(); throw new Error('Failed'); }));
            try {
                const html = await Promise.any(fetches);
                content.innerHTML = html;
            } catch (e) {
                content.innerHTML = '<p>All chains down. Heavy site? Deploy server-side.</p>';
            }
            spinner.style.display = 'none';
        }

        function loadGame(gameUrl, name) {
            const player = document.getElementById('game-player');
            const iframe = document.getElementById('game-iframe');
            player.style.display = 'block';
            const proxyIndex = document.getElementById('proxy-select').value;
            const getProxy = proxies[proxyIndex];
            fetch(getProxy(gameUrl)).then(res => res.text()).then(html => {
                iframe.srcdoc = html;
            }).catch(() => {
                iframe.src = gameUrl;
            });
            player.scrollIntoView({ behavior: 'smooth' });
        }

        function goFullScreen() {
            const player = document.getElementById('game-player');
            if (player.requestFullscreen) player.requestFullscreen();
        }

        function aboutBlankProxy() {
            const newTab = window.open();
            newTab.document.write('<html><head><title>Loading...</title></head><body style="background:black;color:white;">Proxying...</body></html>');
            newTab.document.close();
            setTimeout(() => newTab.location.href = window.location.href, 500);
        }

        function applyCloak() {
            document.title = document.getElementById('cloak-title').value || 'Google Docs';
            document.getElementById('favicon').href = document.getElementById('cloak-favicon').value || 'https://docs.google.com/favicon.ico';
        }

        function setTheme(theme) {
            document.body.classList.remove('light-theme', 'neon-theme', 'matrix-theme');
            if (theme !== 'dark') document.body.classList.add(`${theme}-theme`);
        }

        function toggleInspect() {
            alert('Hit F12 for dev tools.');
        }

        let particlesOn = false;
        function toggleParticles() {
            particlesOn = !particlesOn;
            if (particlesOn) initParticles();
            else { const ctx = document.getElementById('particles').getContext('2d'); ctx.clearRect(0, 0, window.innerWidth, window.innerHeight); }
        }

        function initParticles() {
            const canvas = document.getElementById('particles');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            const particles = [];
            for (let i = 0; i < 200; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    r: Math.random() * 3 + 1,
                    vx: Math.random() * 2 - 1,
                    vy: Math.random() * 2 - 1,
                    color: document.body.classList.contains('neon-theme') ? 'rgba(0,255,255,0.5)' : document.body.classList.contains('matrix-theme') ? 'rgba(0,255,0,0.5)' : 'rgba(0,212,255,0.5)'
                });
            }
            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                particles.forEach(p => {
                    ctx.fillStyle = p.color;
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
                    ctx.fill();
                    p.x += p.vx;
                    p.y += p.vy;
                    if (p.x < 0 || p.x > canvas.width) p.vx = -p.vx;
                    if (p.y < 0 || p.y > canvas.height) p.vy = -p.vy;
                });
                if (particlesOn) requestAnimationFrame(draw);
            }
            draw();
        }

        function filterItems(type) {
            const query = (type === 'games' ? document.getElementById('search') : document.getElementById('app-search')).value.toLowerCase();
            document.querySelectorAll(`#${type}-grid > div`).forEach(item => {
                item.style.display = item.dataset.name.toLowerCase().includes(query) ? 'block' : 'none';
            });
        }

        function toggleFavorite(e, item) {
            e.stopPropagation();
            const name = item.dataset.name;
            const idx = favorites.findIndex(f => f.name === name);
            if (idx > -1) favorites.splice(idx, 1);
            else favorites.push({ name, url: item.dataset.url, img: item.querySelector('img').src });
            localStorage.setItem('favorites', JSON.stringify(favorites));
            loadFavorites();
        }

        function loadFavorites() {
            const grid = document.getElementById('favorites-grid');
            grid.innerHTML = '';
            favorites.forEach(f => {
                const div = document.createElement('div');
                div.className = 'game-item';
                div.dataset.name = f.name;
                div.dataset.url = f.url;
                div.onclick = () => loadGame(f.url, f.name);
                div.innerHTML = `<img src="${f.img}" alt="${f.name}"><h3>${f.name}</h3><button class="favorite-btn" onclick="toggleFavorite(event, this.parentElement)">Unfav</button>`;
                grid.appendChild(div);
            });
        }

        function loadHistory() {
            const list = document.getElementById('history-list');
            list.innerHTML = '';
            history.forEach(url => {
                const li = document.createElement('li');
                li.textContent = url;
                li.onclick = () => { document.getElementById('urlInput').value = url; loadProxy(); };
                list.appendChild(li);
            });
        }

        // Init
        showTab('home');
        loadFavorites();
        loadHistory();
    </script>
</body>
</html>
